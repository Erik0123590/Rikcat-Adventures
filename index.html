<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">
<title>Rikcat Adventure</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #222;
  overflow: hidden;
}

canvas {
  background: #6aa9ff;
  display: block;
}

/* Controles */
.controls {
  position: fixed;
  bottom: 10px;
  width: 100%;
  display: flex;
  justify-content: space-between;
  pointer-events: none;
}

.left, .right {
  display: flex;
  gap: 15px;
  pointer-events: auto;
}

button {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  border: none;
  background: rgba(255,255,255,0.3);
}

button img {
  width: 40px;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div class="controls">
  <div class="left">
    <button id="left"><img src="https://i.imgur.com/4ZQZ4ZP.png"></button>
    <button id="right"><img src="https://i.imgur.com/JxTzC1J.png"></button>
  </div>
  <div class="right">
    <button id="jump"><img src="https://i.imgur.com/0XKzn8E.png"></button>
    <button id="attack"><img src="https://i.imgur.com/9c9XnVZ.png"></button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let gameState = "title";

const rikcat = {
  x: 100,
  y: 200,
  w: 50,
  h: 50,
  vx: 0,
  vy: 0,
  onGround: false,
  color: "orange",
  attacking: false
};

const enemy = {
  x: 500,
  y: 220,
  w: 40,
  h: 40,
  alive: true
};

const powerUp = {
  x: 350,
  y: 230,
  size: 20,
  active: true
};

const gravity = 0.6;

let keys = {};

function drawRikcat(p){
  const cx = p.x + p.w/2;
  const cy = p.y + p.h/2;

  // Cabeça
  ctx.fillStyle = p.color === "purple" ? "#8a2be2" : "#FFA500";
  ctx.beginPath();
  ctx.arc(cx, cy, p.w/2, 0, Math.PI*2);
  ctx.fill();
  ctx.strokeStyle = "black";
  ctx.lineWidth = 4;
  ctx.stroke();

  // Orelhas
  ctx.beginPath();
  ctx.moveTo(p.x, p.y+10);
  ctx.lineTo(p.x+10, p.y-15);
  ctx.lineTo(p.x+20, p.y+10);
  ctx.fill();
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(p.x+p.w-20, p.y+10);
  ctx.lineTo(p.x+p.w-10, p.y-15);
  ctx.lineTo(p.x+p.w, p.y+10);
  ctx.fill();
  ctx.stroke();

  // Rosa das orelhas
  ctx.fillStyle = "#FF2EB8";
  ctx.beginPath();
  ctx.moveTo(p.x+6, p.y+10);
  ctx.lineTo(p.x+12, p.y-2);
  ctx.lineTo(p.x+18, p.y+10);
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(p.x+p.w-18, p.y+10);
  ctx.lineTo(p.x+p.w-12, p.y-2);
  ctx.lineTo(p.x+p.w-6, p.y+10);
  ctx.fill();

  // Olhos
  ctx.strokeStyle = "black";
  ctx.beginPath();
  ctx.moveTo(cx-10, cy-5);
  ctx.lineTo(cx-10, cy+8);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(cx+10, cy-5);
  ctx.lineTo(cx+10, cy+8);
  ctx.stroke();

  // Nariz
  ctx.fillStyle = "#FF2EB8";
  ctx.beginPath();
  ctx.moveTo(cx, cy+5);
  ctx.lineTo(cx-6, cy+15);
  ctx.lineTo(cx+6, cy+15);
  ctx.fill();

  // Boca
  ctx.strokeStyle = "black";
  ctx.beginPath();
  ctx.moveTo(cx, cy+15);
  ctx.lineTo(cx, cy+22);
  ctx.lineTo(cx+6, cy+24);
  ctx.stroke();

  // Garras
  if(p.attacking){
    ctx.strokeStyle = "white";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(cx+20, cy);
    ctx.lineTo(cx+40, cy-10);
    ctx.stroke();
  }
}

function update(){
  if(gameState === "title") return;

  rikcat.vy += gravity;
  rikcat.x += rikcat.vx;
  rikcat.y += rikcat.vy;

  if(rikcat.y + rikcat.h > canvas.height - 50){
    rikcat.y = canvas.height - 50 - rikcat.h;
    rikcat.vy = 0;
    rikcat.onGround = true;
  }

  // Power-up
  if(powerUp.active &&
     rikcat.x < powerUp.x+20 &&
     rikcat.x+rikcat.w > powerUp.x &&
     rikcat.y < powerUp.y+20 &&
     rikcat.y+rikcat.h > powerUp.y){
       powerUp.active = false;
       rikcat.color = "purple";
       setTimeout(()=>rikcat.color="orange", 5000);
  }

  // Ataque
  if(rikcat.attacking && enemy.alive &&
     rikcat.x+rikcat.w+20 > enemy.x){
       enemy.alive = false;
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(gameState === "title"){
    ctx.fillStyle = "white";
    ctx.font = "40px Arial";
    ctx.fillText("RIKCAT ADVENTURE", 50, 100);
    ctx.font = "20px Arial";
    ctx.fillText("Toque para começar", 80, 160);
    return;
  }

  drawRikcat(rikcat);

  if(enemy.alive){
    ctx.fillStyle = "red";
    ctx.fillRect(enemy.x, enemy.y, enemy.w, enemy.h);
  }

  if(powerUp.active){
    ctx.fillStyle = "#8a2be2";
    ctx.beginPath();
    ctx.arc(powerUp.x, powerUp.y, 10, 0, Math.PI*2);
    ctx.fill();
  }
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

// Controles
document.getElementById("left").ontouchstart = ()=>rikcat.vx = -4;
document.getElementById("right").ontouchstart = ()=>rikcat.vx = 4;
document.getElementById("left").ontouchend =
document.getElementById("right").ontouchend = ()=>rikcat.vx = 0;

document.getElementById("jump").ontouchstart = ()=>{
  if(rikcat.onGround){
    rikcat.vy = -12;
    rikcat.onGround = false;
  }
};

document.getElementById("attack").ontouchstart = ()=>{
  rikcat.attacking = true;
  setTimeout(()=>rikcat.attacking=false, 200);
};

canvas.addEventListener("click", ()=>{
  if(gameState === "title") gameState = "game";
});
</script>

</body>
  </html>
